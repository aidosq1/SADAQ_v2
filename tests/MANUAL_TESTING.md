# Сценарии ручного тестирования - Турниры

## Предварительные требования
- Сервер запущен (`npm run dev`)
- Админ-пользователь авторизован
- БД содержит тестовые данные

---

## 1. Админка турниров (`/admin/tournaments`)

### 1.1 Просмотр списка турниров
| # | Действие | Ожидаемый результат |
|---|----------|---------------------|
| 1 | Открыть `/admin/tournaments` | Страница загружается, таблица отображается |
| 2 | Проверить колонки | Название, Даты, Место, Категории, Регистрация, На главной, Действия |
| 3 | Проверить badges категорий | Отображаются первые 3 категории + "+N" если больше |

### 1.2 Создание турнира
| # | Действие | Ожидаемый результат |
|---|----------|---------------------|
| 1 | Нажать "Добавить" | Открывается модальное окно |
| 2 | Заполнить только обязательные поля | Кнопка "Сохранить" активна |
| 3 | Оставить пустым название | Toast: "Название обязательно" |
| 4 | Оставить пустыми даты | Toast: "Даты начала и окончания обязательны" |
| 5 | Оставить пустым место | Toast: "Место проведения обязательно" |
| 6 | Заполнить все поля корректно | Турнир создаётся, модал закрывается |

### 1.3 Добавление категорий
| # | Действие | Ожидаемый результат |
|---|----------|---------------------|
| 1 | Выбрать возраст, пол, тип лука | Селекторы работают корректно |
| 2 | Нажать "Добавить" | Категория появляется в списке |
| 3 | Добавить дублирующую категорию | Toast: "Такая категория уже добавлена" |
| 4 | Загрузить регламент для категории | Файл загружается, URL отображается |
| 5 | Удалить категорию (X) | Категория удаляется из списка |

### 1.4 Редактирование турнира
| # | Действие | Ожидаемый результат |
|---|----------|---------------------|
| 1 | Нажать карандаш на турнире | Открывается модал с данными |
| 2 | Проверить заполненность полей | Все поля предзаполнены |
| 3 | Проверить категории | Категории турнира отображаются |
| 4 | Изменить данные и сохранить | Изменения применяются |

### 1.5 Удаление турнира
| # | Действие | Ожидаемый результат |
|---|----------|---------------------|
| 1 | Нажать корзину | Открывается диалог подтверждения |
| 2 | Нажать "Отмена" | Диалог закрывается, турнир на месте |
| 3 | Нажать "Удалить" | Турнир удаляется, Toast подтверждает |

### 1.6 Переключатели
| # | Действие | Ожидаемый результат |
|---|----------|---------------------|
| 1 | Нажать глаз (регистрация) | Статус переключается, Toast появляется |
| 2 | Нажать звезду (на главной) | Только один турнир может быть featured |

---

## 2. Публичный календарь (`/calendar`)

### 2.1 Отображение списка
| # | Действие | Ожидаемый результат |
|---|----------|---------------------|
| 1 | Открыть `/calendar` | Страница загружается |
| 2 | Проверить колонки | Статус, Дата, Название, Город, Категории, Документы |
| 3 | Проверить статусы | Завершен (серый), Идёт (зелёный), Планируется (синий) |
| 4 | Проверить badges категорий | Типы луков и возрасты отображаются |

### 2.2 Фильтрация
| # | Действие | Ожидаемый результат |
|---|----------|---------------------|
| 1 | Нажать "Классический" | Отображаются только турниры с Recurve |
| 2 | Нажать "Блочный" | Отображаются только турниры с Compound |
| 3 | Нажать "Взрослые" | Отображаются только турниры с Adults |
| 4 | Комбинировать фильтры | Работает AND логика |
| 5 | Нажать "Все дисциплины" | Фильтр сбрасывается |

### 2.3 Ссылки
| # | Действие | Ожидаемый результат |
|---|----------|---------------------|
| 1 | Кликнуть на название турнира | Переход на `/tournaments/[id]` |
| 2 | Кликнуть "Заявка" (активный турнир) | Переход на `/tournaments/apply?tournamentId=[id]` |
| 3 | Кликнуть скачивание регламента | Файл открывается в новой вкладке |

---

## 3. Страница турнира (`/tournaments/[id]`)

### 3.1 Заголовок
| # | Действие | Ожидаемый результат |
|---|----------|---------------------|
| 1 | Проверить badge статуса | Корректный статус (Завершён/Идёт/Запланирован) |
| 2 | Проверить название | Локализованное название |
| 3 | Проверить даты | Формат: "1 января 2025 — 5 января 2025" |
| 4 | Проверить место | Локализованное место |
| 5 | Проверить кол-во категорий | "N категорий" |

### 3.2 Категории (табы)
| # | Действие | Ожидаемый результат |
|---|----------|---------------------|
| 1 | Кликнуть на таб категории | Контент переключается |
| 2 | Проверить название категории | "Взрослые Мужчины - Классический" |
| 3 | Кликнуть "Регламент" | Файл открывается (если есть) |

### 3.3 Результаты
| # | Действие | Ожидаемый результат |
|---|----------|---------------------|
| 1 | Проверить таблицу результатов | Место, Спортсмен, Регион, Очки, Счёт |
| 2 | Проверить медали | 1-3 место имеют цветные badges |
| 3 | Кликнуть на спортсмена | Переход на `/team/[slug]` |
| 4 | Нет результатов | "Результаты ещё не опубликованы" |

### 3.4 Кнопка регистрации
| # | Действие | Ожидаемый результат |
|---|----------|---------------------|
| 1 | Турнир активный | Кнопка "Регистрация" отображается |
| 2 | Турнир завершён | Кнопка не отображается |
| 3 | Турнир неактивный | Кнопка не отображается |

---

## 4. Виджет календаря (главная страница)

### 4.1 Отображение
| # | Действие | Ожидаемый результат |
|---|----------|---------------------|
| 1 | Открыть главную | Виджет отображается |
| 2 | Проверить количество | Максимум 4 турнира |
| 3 | Проверить фильтр | Только текущие и будущие |
| 4 | Проверить badges типов | Классический/Блочный отображаются |

### 4.2 Взаимодействие
| # | Действие | Ожидаемый результат |
|---|----------|---------------------|
| 1 | Кликнуть на турнир | Переход на `/tournaments/[id]` |
| 2 | Hover на турнир | Появляется стрелка, подсветка |
| 3 | Кликнуть "Все события" | Переход на `/calendar` |

---

## 5. Мультиязычность

### 5.1 Проверка переключения языка
| # | Язык | Страница | Проверить |
|---|------|----------|-----------|
| 1 | RU | Календарь | "Календарь соревнований", статусы на русском |
| 2 | KK | Календарь | "Жарыстар күнтізбесі", статусы на казахском |
| 3 | EN | Календарь | "Competition Calendar", статусы на английском |
| 4 | RU | Турнир | Название, описание, место на русском |
| 5 | KK | Турнир | Название, описание, место на казахском |
| 6 | EN | Турнир | Название, описание, место на английском |

---

## 6. Edge Cases

### 6.1 Пустые данные
| # | Сценарий | Ожидаемый результат |
|---|----------|---------------------|
| 1 | Нет турниров | "Турниры не найдены" |
| 2 | Турнир без категорий | "Категории турнира ещё не добавлены" |
| 3 | Категория без результатов | "Результаты ещё не опубликованы" |
| 4 | Категория без регламента | Кнопка "Регламент" скрыта |

### 6.2 Некорректные URL
| # | URL | Ожидаемый результат |
|---|-----|---------------------|
| 1 | `/tournaments/999999` | "Турнир не найден" |
| 2 | `/tournaments/abc` | "Турнир не найден" или 404 |

### 6.3 Даты
| # | Сценарий | Ожидаемый результат |
|---|----------|---------------------|
| 1 | startDate = endDate | Одна дата: "1 января 2025" |
| 2 | startDate < endDate | Диапазон: "1-5 января 2025" |
| 3 | Турнир в прошлом | Статус "Завершён" |
| 4 | Турнир сегодня | Статус "Идёт" |
| 5 | Турнир в будущем | Статус "Запланирован" |

---

## 7. Производительность

| # | Метрика | Порог |
|---|---------|-------|
| 1 | Загрузка `/calendar` | < 2 сек |
| 2 | Загрузка `/tournaments/[id]` | < 2 сек |
| 3 | Переключение табов категорий | < 100 мс |
| 4 | Фильтрация турниров | < 500 мс |

---

## Чеклист перед релизом

- [ ] Все CRUD операции работают
- [ ] Категории создаются/удаляются
- [ ] Фильтрация работает
- [ ] Страница турнира отображается
- [ ] Результаты отображаются
- [ ] Мультиязычность работает
- [ ] Виджет на главной работает
- [ ] Регламенты загружаются
- [ ] Нет консольных ошибок
- [ ] Мобильная версия работает
